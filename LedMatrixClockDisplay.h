#pragma once

#include <MD_MAX72xx.h>
#include "DebugMacros.h"
#include "EnvSensor.h"
#include "RTClock.h"

#define HARDWARE_TYPE MD_MAX72XX::ICSTATION_HW
#define MAX_DEVICES 16

#define CLK_PIN 13   // or SCK
#define DATA_PIN 11  // or MOSI
#define CS_PIN 10    // or SS


class LedMatrixClockDisplay {
public:
  void initialize();
  
  inline void startup() {
    mx.control(MD_MAX72XX::SHUTDOWN, MD_MAX72XX::OFF);
  }
  inline void shutdown() {
    mx.control(MD_MAX72XX::SHUTDOWN, MD_MAX72XX::ON);
  }
  inline void clear() {
    mx.clear();
  }
  inline void update() {
    mx.update();
  }

  void print(RTime time);
  void print(TemperatureAndHumidity value);

private:
  bool initialized = false;
  
  MD_MAX72XX mx = MD_MAX72XX(HARDWARE_TYPE, CS_PIN, MAX_DEVICES);

  uint8_t zero[160] = {
    0b00000000,
    0b00000000,
    0b00111100,
    0b01111110,
    0b11100111,
    0b11000011,
    0b11000011,
    0b11000011,
    0b11000011,
    0b11000011,
    0b11000011,
    0b11100111,
    0b01111110,
    0b00111100,
    0b00000000,
    0b00000000,

    0b00000000,
    0b00000000,
    0b00001100,
    0b00011100,
    0b00111100,
    0b00111100,
    0b00001100,
    0b00001100,
    0b00001100,
    0b00001100,
    0b00001100,
    0b00001100,
    0b00001100,
    0b00001100,
    0b00000000,
    0b00000000,

    0b00000000,
    0b00000000,
    0b00111100,
    0b01111110,
    0b11100111,
    0b11000111,
    0b00000111,
    0b00001110,
    0b00011100,
    0b00111000,
    0b01110000,
    0b11100000,
    0b11111111,
    0b11111111,
    0b00000000,
    0b00000000,

    0b00000000,
    0b00000000,
    0b01111100,
    0b11111110,
    0b11000111,
    0b00000011,
    0b00000111,
    0b00011110,
    0b00011110,
    0b00000111,
    0b00000011,
    0b11000111,
    0b11111110,
    0b01111100,
    0b00000000,
    0b00000000,

    0b00000000,
    0b00000000,

    0b00001110,
    0b00011110,
    0b00111110,
    0b01110110,
    0b11100110,
    0b11000110,
    0b11000110,
    0b11111111,
    0b11111111,
    0b00000110,
    0b00000110,
    0b00000110,
    0b00000000,
    0b00000000,


    0b00000000,
    0b00000000,
    0b11111111,
    0b11111111,
    0b11000000,
    0b11011100,
    0b11111110,
    0b11110111,
    0b11100011,
    0b00000011,
    0b00000011,
    0b11000111,
    0b11111110,
    0b01111100,
    0b00000000,
    0b00000000,


    0b00000000,
    0b00000000,
    0b00111100,
    0b01111110,
    0b11100110,
    0b11000000,
    0b11011100,
    0b11111110,
    0b11110111,
    0b11000011,
    0b11000011,
    0b11100111,
    0b01111110,
    0b00111100,
    0b00000000,
    0b00000000,

    0b00000000,
    0b00000000,
    0b11111111,
    0b11111111,
    0b00000011,
    0b00000111,
    0b00000110,
    0b00001110,
    0b00001100,
    0b00011100,
    0b00011000,
    0b00111000,
    0b00110000,
    0b01110000,
    0b00000000,
    0b00000000,

    0b00000000,
    0b00000000,
    0b00111100,
    0b01111110,
    0b11100111,
    0b11000011,
    0b11100111,
    0b01111110,
    0b01111110,
    0b11100111,
    0b11000011,
    0b11100111,
    0b01111110,
    0b00111100,
    0b00000000,
    0b00000000,

    0b00000000,
    0b00000000,
    0b00111100,
    0b01111110,
    0b11100111,
    0b11000011,
    0b11000011,
    0b11101111,
    0b01111111,
    0b00111011,
    0b00000011,
    0b01100111,
    0b01111110,
    0b00111100,
    0b00000000,
    0b00000000,

  };
};
